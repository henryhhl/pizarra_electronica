(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{178:function(e,t,a){},179:function(e,t,a){},194:function(e,t,a){},207:function(e,t,a){},281:function(e,t,a){},285:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(24),i=a.n(c),o=(a(178),a(179),a(22)),s=a.n(o),l=a(39),d=a(23),u=a(63),b=a(7),j="[Chat] Usuario Cargados",h="[Chat] Activar Chat",p="[Chat] Nuevo Mensaje",m="[Chat] Cargar Mensaje",O="[Chat] Limpiar Chat",g="[Sala] Salas Cargados",x="[Sala Usuario] Salas Usuarios Cargados",f="[Sala Usuario] Salas Usuarios Cargados",y="[Sala] Limpiar Cargados",v="[Table] Tables Cargados",k="[Table] Limpiar Cargados",C=function(e,t){var a,r,n,c;switch(t.type){case j:return Object(b.a)(Object(b.a)({},e),{},{array_usuario:Object(u.a)(t.payload)});case h:return(null===(a=e.chatActivo)||void 0===a?void 0:a.uid)===(null===(r=t.payload)||void 0===r?void 0:r.uid)?e:Object(b.a)(Object(b.a)({},e),{},{chatActivo:t.payload,array_mensaje:[]});case O:return Object(b.a)(Object(b.a)({},e),{},{uid:"",chatActivo:null,array_usuario:[],array_mensaje:[]});case p:return(null===(n=e.chatActivo)||void 0===n?void 0:n.uid)===t.payload.de||(null===(c=e.chatActivo)||void 0===c?void 0:c.uid)===t.payload.para?Object(b.a)(Object(b.a)({},e),{},{array_mensaje:[].concat(Object(u.a)(e.array_mensaje),[t.payload])}):e;case m:return Object(b.a)(Object(b.a)({},e),{},{array_mensaje:Object(u.a)(t.payload)});default:return e}},w=a(2),S=Object(r.createContext)(),N={uid:"",chatActivo:null,array_usuario:[],array_mensaje:[]},I=function(e){var t=e.children,a=Object(r.useReducer)(C,N),n=Object(d.a)(a,2),c=n[0],i=n[1];return Object(w.jsx)(S.Provider,{value:{chatState:c,dispatch:i},children:t})},T=function(e,t){switch(t.type){case g:return Object(b.a)(Object(b.a)({},e),{},{array_sala:Object(u.a)(t.payload)});case x:return Object(b.a)(Object(b.a)({},e),{},{array_usuario:Object(u.a)(t.payload)});case f:return Object(b.a)(Object(b.a)({},e),{},{array_usuario:[]});case y:return Object(b.a)(Object(b.a)({},e),{},{array_sala:[],array_usuario:[]});default:return e}},E=Object(r.createContext)(),R={array_sala:[],array_usuario:[]},A=function(e){var t=e.children,a=Object(r.useReducer)(T,R),n=Object(d.a)(a,2),c=n[0],i=n[1];return Object(w.jsx)(E.Provider,{value:{salaState:c,dispatchSala:i},children:t})},L="https://pizarra-virtual.herokuapp.com/api",z=function(){var e=Object(l.a)(s.a.mark((function e(t,a){var r,n,c,i,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:"GET",n="".concat(L).concat(t),"GET"!==r){e.next=11;break}return e.next=5,fetch(n);case 5:return c=e.sent,e.next=8,c.json();case 8:case 16:return e.abrupt("return",e.sent);case 11:return e.next=13,fetch(n,{method:r,headers:{"Content-type":"application/json"},body:JSON.stringify(a)});case 13:return i=e.sent,e.next=16,i.json();case 17:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(s.a.mark((function e(t,a){var r,n,c,i,o,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>2&&void 0!==l[2]?l[2]:"GET",n="".concat(L).concat(t),c=localStorage.getItem("token")||"","GET"!==r){e.next=18;break}return e.prev=4,e.next=7,fetch(n,{headers:{"x-token":c}});case 7:return i=e.sent,e.next=10,i.json();case 10:case 23:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",null);case 16:e.next=24;break;case 18:return e.next=20,fetch(n,{method:r,headers:{"Content-type":"application/json","x-token":c},body:JSON.stringify(a)});case 20:return o=e.sent,e.next=23,o.json();case 24:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,a){return e.apply(this,arguments)}}(),D=Object(r.createContext)(),_={uid:null,checking:!0,logged:!1,nombre:null,apellido:null,usuario:null,email:null,onOffLine:!1},B=function(e){var t=e.children,a=Object(r.useState)(_),n=Object(d.a)(a,2),c=n[0],i=n[1],o=Object(r.useContext)(S).dispatch,u=Object(r.useContext)(E).dispatchSala,b=function(){var e=Object(l.a)(s.a.mark((function e(t,a){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/login",{usuario:t,password:a},"POST");case 2:if(1!==(r=e.sent).response){e.next=9;break}return u({type:g,payload:r.array_sala}),localStorage.setItem("token",r.token),n=r.usuario,i({uid:n.uid,checking:!1,logged:!0,nombre:n.nombre,apellido:n.apellido,usuario:n.usuario,email:n.email}),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(s.a.mark((function e(t,a,r,n,c){var o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/register",{nombre:t,apellido:a,email:r,usuario:n,password:c},"POST");case 2:if(1!==(o=e.sent).response){e.next=9;break}return u({type:g,payload:o.array_sala}),localStorage.setItem("token",o.token),l=o.usuario,i({uid:l.uid,checking:!1,logged:!0,nombre:l.nombre,apellido:l.apellido,usuario:l.usuario,email:l.email}),e.abrupt("return",o);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,a,r,n,c){return e.apply(this,arguments)}}(),h=Object(r.useCallback)(Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=6;break}return u({type:y}),o({type:O}),i({uid:null,checking:!1,logged:!1,nombre:null,apellido:null,usuario:null,email:null,onOffLine:!1}),e.abrupt("return",!1);case 6:return e.next=8,P("/auth/newToken");case 8:if(t=e.sent,console.log(t),t){e.next=14;break}return localStorage.removeItem("token"),i({onOffLine:!0,checking:!1}),e.abrupt("return",!1);case 14:if(1!==t.response){e.next=20;break}return localStorage.setItem("token",t.token),a=t.usuario,u({type:g,payload:t.array_sala}),i({uid:a.uid,checking:!1,logged:!0,nombre:a.nombre,apellido:a.apellido,usuario:a.usuario,email:a.email,onOffLine:!1}),e.abrupt("return",!0);case 20:return u({type:y}),o({type:O}),localStorage.removeItem("token"),i({uid:null,checking:!1,logged:!1,nombre:null,apellido:null,usuario:null,email:null}),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e)}))),[u,o]);return Object(w.jsx)(D.Provider,{value:{auth:c,login:b,register:j,verificaToken:h,logout:function(){localStorage.removeItem("token"),o({type:O}),u({type:y}),i({uid:null,checking:!1,logged:!1,nombre:null,apellido:null,usuario:null,email:null})}},children:t})},F=a(167),M=a(134),U=function(e){M.animateScroll.scrollToBottom({containerId:e,duration:0})},q=function(e,t){switch(t.type){case v:return Object(b.a)(Object(b.a)({},e),{},{array_table:Object(u.a)(t.payload)});case k:return Object(b.a)(Object(b.a)({},e),{},{array_table:[]});default:return e}},K=Object(r.createContext)(),W={array_table:[]},Y=function(e){var t=e.children,a=Object(r.useReducer)(q,W),n=Object(d.a)(a,2),c=n[0],i=n[1];return Object(w.jsx)(K.Provider,{value:{tableState:c,dispatchTable:i},children:t})},G=Object(r.createContext)(),H=function(e){var t=e.children,a=function(e){var t=Object(r.useState)(null),a=Object(d.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(!1),o=Object(d.a)(i,2),s=o[0],l=o[1],u=Object(r.useCallback)((function(){var t=localStorage.getItem("token"),a=Object(F.a)(e,{transports:["websocket"],autoConnect:!0,forceNew:!0,query:{"x-token":t}});c(a)}),[e]),b=Object(r.useCallback)((function(){null===n||void 0===n||n.disconnect(),c(null)}),[n]);return Object(r.useEffect)((function(){l(null===n||void 0===n?void 0:n.connected)}),[n]),Object(r.useEffect)((function(){null===n||void 0===n||n.on("connect",(function(){return l(!0)}))}),[n]),Object(r.useEffect)((function(){null===n||void 0===n||n.on("disconnect",(function(){return l(!1)}))}),[n]),{conectarSocket:u,desconectarSocket:b,online:s,socket:n}}("https://pizarra-virtual.herokuapp.com/"),n=a.conectarSocket,c=a.desconectarSocket,i=a.online,o=a.socket,s=Object(r.useContext)(D).auth,l=Object(r.useContext)(S).dispatch,u=Object(r.useContext)(E).dispatchSala,b=Object(r.useContext)(K).dispatchTable;return Object(r.useEffect)((function(){s.logged&&n()}),[s,n]),Object(r.useEffect)((function(){s.logged||c()}),[s,c]),Object(r.useEffect)((function(){null===o||void 0===o||o.on("getUsuario",(function(e){l({type:j,payload:e})}))}),[o,l]),Object(r.useEffect)((function(){null===o||void 0===o||o.on("sala-actualizada",(function(){null===o||void 0===o||o.emit("getSala",s.uid)}))}),[o,l]),Object(r.useEffect)((function(){null===o||void 0===o||o.on("getSala",(function(e){u({type:g,payload:e})}))}),[o,u]),Object(r.useEffect)((function(){null===o||void 0===o||o.on("ingresar-sala",(function(e){b({type:v,payload:e})}))}),[o,b]),Object(r.useEffect)((function(){null===o||void 0===o||o.on("mensaje-personal",(function(e){l({type:p,payload:e}),U("messageID")}))}),[o,l]),Object(w.jsx)(G.Provider,{value:{socket:o,online:i},children:t})},J=a(85),X=a(45),Q=a(25),V=(a(194),function(){return Object(w.jsx)("div",{className:"contenedor",children:Object(w.jsxs)("div",{className:"group",children:[Object(w.jsxs)("div",{className:"bigSqr",children:[Object(w.jsx)("div",{className:"square first"}),Object(w.jsx)("div",{className:"square second"}),Object(w.jsx)("div",{className:"square third"}),Object(w.jsx)("div",{className:"square fourth"})]}),Object(w.jsx)("div",{className:"text",children:"loading"})]})})}),Z=a(103),$=a.n(Z),ee=function(){var e=Object(r.useContext)(D).login,t=Object(r.useState)({usuario:"admin",password:"123456",rememberme:!1}),a=Object(d.a)(t,2),n=a[0],c=a[1];function i(){return(i=Object(l.a)(s.a.mark((function t(a){var r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n.rememberme?localStorage.setItem("usuario",n.usuario):localStorage.removeItem("usuario"),r=n.usuario,c=n.password,t.next=5,e(r,c);case 5:t.sent||$.a.fire("Error","Credenciales incorrecto","error");case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=localStorage.getItem("usuario");e&&c((function(t){return Object(b.a)(Object(b.a)({},t),{},{usuario:e,rememberme:!0})}))}),[]),Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"row justify-content-center",children:Object(w.jsx)("div",{className:"col-md-6 col-lg-5",children:Object(w.jsxs)("div",{className:"login-wrap p-4 p-md-5",children:[Object(w.jsx)("div",{className:"icon d-flex align-items-center justify-content-center",children:Object(w.jsx)("span",{className:"fa fa-user-o"})}),Object(w.jsx)("h3",{className:"text-center mb-4",children:"Iniciar sesi\xf3n"}),Object(w.jsxs)("form",{onSubmit:function(e){return i.apply(this,arguments)},className:"login-form",children:[Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control rounded-left",placeholder:"Usuario",required:!0,value:n.usuario,onChange:function(e){c(Object(b.a)(Object(b.a)({},n),{},{usuario:e.target.value}))}})}),Object(w.jsx)("div",{className:"form-group d-flex",children:Object(w.jsx)("input",{type:"password",className:"form-control rounded-left",placeholder:"Password",required:!0,value:n.password,onChange:function(e){c(Object(b.a)(Object(b.a)({},n),{},{password:e.target.value}))}})}),Object(w.jsxs)("div",{className:"form-group d-md-flex",children:[Object(w.jsx)("div",{className:"w-50",children:Object(w.jsxs)("label",{className:"checkbox-wrap checkbox-primary",children:["Recordarme",Object(w.jsx)("input",{type:"checkbox",checked:n.rememberme,readOnly:!0}),Object(w.jsx)("span",{className:"checkmark",onClick:function(){return console.log(1),void c(Object(b.a)(Object(b.a)({},n),{},{rememberme:!n.rememberme}))}})]})}),Object(w.jsx)("div",{className:"w-50 text-md-right",children:Object(w.jsx)(X.b,{to:"/auth/register",children:"Registrarse"})})]}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("button",{type:"submit",className:"btn btn-primary rounded submit p-3 px-5",disabled:!(n.usuario.length>0&&n.password.length>0),children:"Login"})})]})]})})})})},te=function(){var e=Object(r.useContext)(D).register,t=Object(r.useState)({nombre:"",apellido:"",email:"",usuario:"",password:""}),a=Object(d.a)(t,2),n=a[0],c=a[1];function i(){return(i=Object(l.a)(s.a.mark((function t(a){var r,c,i,o,l,d;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r=n.nombre,c=n.apellido,i=n.email,o=n.usuario,l=n.password,t.next=4,e(r,c,i,o,l);case 4:1!==(d=t.sent).response&&$.a.fire("Error",d.message,"error");case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("div",{className:"row justify-content-center",children:Object(w.jsx)("div",{className:"col-md-6 col-lg-5",children:Object(w.jsxs)("div",{className:"login-wrap p-4 p-md-5",children:[Object(w.jsx)("h3",{className:"text-center mb-4",children:"Nueva cuenta"}),Object(w.jsxs)("form",{onSubmit:function(e){return i.apply(this,arguments)},className:"login-form",children:[Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control rounded-left",placeholder:"Nombre",required:!0,value:n.nombre,onChange:function(e){c(Object(b.a)(Object(b.a)({},n),{},{nombre:e.target.value}))}})}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control rounded-left",placeholder:"Apellido",required:!0,value:n.apellido,onChange:function(e){c(Object(b.a)(Object(b.a)({},n),{},{apellido:e.target.value}))}})}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control rounded-left",placeholder:"Email",required:!0,value:n.email,onChange:function(e){c(Object(b.a)(Object(b.a)({},n),{},{email:e.target.value}))}})}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("input",{type:"text",className:"form-control rounded-left",placeholder:"Usuario",required:!0,value:n.usuario,onChange:function(e){c(Object(b.a)(Object(b.a)({},n),{},{usuario:e.target.value}))}})}),Object(w.jsx)("div",{className:"form-group d-flex",children:Object(w.jsx)("input",{type:"password",className:"form-control rounded-left",placeholder:"Password",required:!0,value:n.password,onChange:function(e){c(Object(b.a)(Object(b.a)({},n),{},{password:e.target.value}))}})}),Object(w.jsxs)("div",{className:"form-group d-md-flex",children:[Object(w.jsx)("div",{className:"w-50"}),Object(w.jsx)("div",{className:"w-50 text-md-right",children:Object(w.jsx)(X.b,{to:"/auth/login",children:"Iniciar sesion"})})]}),Object(w.jsx)("div",{className:"form-group",children:Object(w.jsx)("button",{type:"submit",className:"btn btn-primary rounded submit p-3 px-5",disabled:!function(){var e=n.nombre,t=n.apellido,a=n.email,r=n.usuario,c=n.password;return e.length>0&&t.length>0&&a.length>0&&r.length>0&&c.length>0}(),children:"Registrarme"})})]})]})})})})},ae=(a(207),function(){return Object(w.jsx)("section",{className:"ftco-section",children:Object(w.jsx)("div",{className:"container",children:Object(w.jsxs)(Q.d,{children:[Object(w.jsx)(Q.b,{exact:!0,path:"/auth/login",render:function(e){return Object(w.jsx)(ee,Object(b.a)({},e))}}),Object(w.jsx)(Q.b,{exact:!0,path:"/auth/register",render:function(e){return Object(w.jsx)(te,Object(b.a)({},e))}}),Object(w.jsx)(Q.a,{exact:!0,to:"/auth/login"})]})})})}),re=a(38),ne=(a(208),a(86)),ce=a(55),ie=a(292),oe=a(297),se=a(294),le=a(295),de=a(290),ue=a(298),be=a(293),je=a(302),he=a(93),pe=function(e){var t=Object(r.useState)(""),a=Object(d.a)(t,2),n=a[0],c=a[1],i=Object(Q.g)(),o=Object(r.useState)(""),u=Object(d.a)(o,2),b=u[0],j=u[1],p=Object(r.useContext)(S),O=p.chatState,g=p.dispatch,x=Object(r.useContext)(D).auth,f=Object(r.useContext)(G).socket,y=Object(r.useContext)(E).salaState;function v(){return(v=Object(l.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g({type:h,payload:t}),e.next=3,P("/mensaje/show/"+t.uid);case 3:1===(a=e.sent).response&&(g({type:m,payload:a.messages}),U("messageID"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){0!==b.trim().length&&(f.emit("store-sala",{nombreSala:b,uid:x.uid}),e.setKeyMenu("1"),j(""))}return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(ne.a,{gutter:[12,8],children:[O.chatActivo?Object(w.jsxs)(ce.a,{xs:{span:24},sm:{span:12},md:{span:8},style:{position:"relative"},children:[Object(w.jsx)(ie.b.Item,{style:{border:"1px solid rgba(140, 140, 140, 0.35)"},children:Object(w.jsx)(ie.b.Item.Meta,{avatar:Object(w.jsx)(oe.a,{style:{marginLeft:5},icon:Object(w.jsx)(je.a,{style:{position:"relative",top:-5}})}),title:Object(w.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingRight:5},children:[Object(w.jsx)("a",{href:"/home",onClick:function(e){return e.preventDefault()},style:{position:"relative",top:4},children:"".concat(O.chatActivo.nombre," ").concat(O.chatActivo.apellido)}),Object(w.jsx)(he.a,{style:{padding:6,borderRadius:20,position:"relative",top:4,backgroundColor:"#1890ff",color:"white",cursor:"pointer"},onClick:function(){c(""),g({type:h,payload:null})}})]})})}),Object(w.jsx)("div",{id:"messageID",style:{height:300,overflowY:"auto",padding:"2px 16px",border:"1px solid rgba(140, 140, 140, 0.35)"},children:O.array_mensaje.map((function(e,t){return Object(w.jsx)("div",{style:{width:"100%",marginTop:6},children:e.para===x.uid?Object(w.jsx)(se.a,{message:e.mensaje,type:"success",style:{width:250,float:"right",marginBottom:6}}):Object(w.jsx)(se.a,{message:e.mensaje,type:"info",style:{width:250}})},t)}))}),Object(w.jsx)(le.a,{style:{width:"100%",minWidth:"100%"},placeholder:"Escribir mensaje...",value:n,onChange:function(e){c(e.target.value)},onKeyPress:function(e){if("Enter"===e.key){if(0===n.length)return;f.emit("mensaje-personal",{de:x.uid,para:O.chatActivo.uid,mensaje:n}),c("")}}})]}):Object(w.jsx)(ce.a,{xs:{span:24},sm:{span:12},md:{span:8},children:Object(w.jsx)("div",{id:"scrollableDiv",style:{height:400,overflowY:"auto",padding:"0 16px",border:"1px solid rgba(140, 140, 140, 0.35)"},children:Object(w.jsx)(ie.b,{dataSource:O.array_usuario.filter((function(e){return e.uid!==x.uid})),renderItem:function(e,t){return Object(w.jsxs)(ie.b.Item,{style:{cursor:"pointer"},onClick:function(){return function(e){return v.apply(this,arguments)}(e)},children:[Object(w.jsx)(ie.b.Item.Meta,{avatar:Object(w.jsx)(oe.a,{icon:Object(w.jsx)(je.a,{style:{position:"relative",top:-5}})}),title:Object(w.jsx)("a",{href:"/home",onClick:function(e){return e.preventDefault()},children:"".concat(e.nombre," ").concat(e.apellido)}),description:e.email}),e.online?Object(w.jsx)(oe.a,{shape:"circle",size:"small",style:{backgroundColor:"#52c41a"}}):Object(w.jsx)(oe.a,{shape:"circle",size:"small",style:{backgroundColor:"red"}})]},t)}})})}),"1"===e.keyMenu?Object(w.jsxs)(ce.a,{xs:{span:24},sm:{span:12},md:{span:16},children:[Object(w.jsx)(de.a,{orientation:"left",style:{padding:0,margin:0,marginBottom:5,marginTop:-5},children:"Listado de Sala"}),Object(w.jsx)("div",{id:"scrollableDiv",style:{height:400,overflowY:"auto",padding:"0 16px",border:"1px solid rgba(140, 140, 140, 0.35)"},children:Object(w.jsx)(ie.b,{dataSource:y.array_sala,renderItem:function(e,t){return Object(w.jsx)(ue.a.Ribbon,{text:e.iniciar?"Iniciado":"No iniciado",color:e.iniciar?"green":"red",children:Object(w.jsxs)(ie.b.Item,{children:[Object(w.jsx)(ie.b.Item.Meta,{title:Object(w.jsxs)("span",{children:[Object(w.jsx)("strong",{children:"C\xf3digo: "}),"".concat(e.uid)]}),description:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{style:{width:"100%"},children:Object(w.jsxs)("span",{children:[Object(w.jsx)("strong",{children:"Nombre: "}),"".concat(e.nombre)]})}),Object(w.jsx)("div",{style:{width:"100%"},children:Object(w.jsxs)("span",{children:[Object(w.jsx)("strong",{children:"Usuario: "}),"".concat(e.user.nombre," ").concat(e.user.apellido)]})})]})}),Object(w.jsx)("div",{children:Object(w.jsx)(J.a,{type:"primary",style:{backgroundColor:"#00ba8b"},onClick:function(){e.fkidusers===x.uid&&f.emit("iniciar-sala",{uid:e.uid}),i.push("/pizarra_virtual/".concat(e.uid))},children:e.user._id===x.uid?"Iniciar":"Ingresar"})})]})},t)}})})]}):Object(w.jsx)(ce.a,{xs:{span:24},sm:{span:12},md:{span:16},children:Object(w.jsxs)(be.a,{title:"Nueva Sala",style:{width:"100%"},children:[Object(w.jsx)(ne.a,{gutter:[12,8],children:Object(w.jsx)(ce.a,{xs:{span:24},sm:{span:24},children:Object(w.jsx)(le.a,{placeholder:"iIngresar nombre de sala",value:b,style:{width:"100%",minWidth:"100%"},onChange:function(e){return j(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&k()}})})}),Object(w.jsx)(ne.a,{gutter:[12,8],justify:"start",style:{marginTop:10},children:Object(w.jsx)(J.a,{type:"primary",style:{backgroundColor:"#00ba8b"},onClick:k,children:"Guardar"})})]})})]})})},me=a(291),Oe=a(299),ge=a(300),xe=a(301),fe=me.a.Header,ye=me.a.Footer,ve=me.a.Content,ke=function(e){var t=Object(r.useContext)(D),a=t.auth,n=t.logout;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(me.a,{style:{position:"relative",minHeight:"100vh"},children:[Object(w.jsxs)(fe,{style:{backgroundColor:"#00ba8b",color:"white",display:"flex",justifyContent:"space-between"},children:[Object(w.jsx)("div",{children:"Bienvenido"}),Object(w.jsx)("div",{children:Object(w.jsx)(ge.a,{overlay:Object(w.jsxs)(Oe.a,{children:[Object(w.jsx)(Oe.a.Item,{children:"Perfil"},"0"),Object(w.jsx)(Oe.a.Item,{children:"Ajuste"},"1"),Object(w.jsx)(Oe.a.Divider,{}),Object(w.jsx)(Oe.a.Item,{onClick:n,children:"Logout"},"3")]}),trigger:["click"],children:Object(w.jsxs)("div",{style:{cursor:"pointer"},children:[Object(w.jsx)(je.a,{style:{position:"relative",top:-3,marginRight:2}}),a.nombre,Object(w.jsx)(xe.a,{style:{position:"relative",top:-3,marginLeft:1}})]})})})]}),Object(w.jsx)("div",{style:{backgroundColor:"#FFF",padding:0},children:Object(w.jsxs)(Oe.a,{theme:"light",mode:"horizontal",activeKey:e.keyMenu,children:[Object(w.jsx)(Oe.a.Item,{onClick:function(){return e.setKeyMenu("1")},children:"Inicio"},"1"),Object(w.jsx)(Oe.a.Item,{onClick:function(){return e.setKeyMenu("2")},children:"Nueva Sala"},"2")]})}),Object(w.jsx)(ve,{style:{margin:"24px 16px 0"},children:Object(w.jsx)("div",{style:{padding:24,minHeight:450,height:470,backgroundColor:"#FFF"},children:e.children})}),Object(w.jsx)(ye,{style:{backgroundColor:"#FFF"},children:"Footer"})]})})},Ce=(a(281),a(296)),we=(a(282),a(283),a(284),a(170)),Se=a(82),Ne=Ce.a.Panel,Ie=Object(Q.h)((function(e){var t=Object(r.useContext)(G).socket,a=Object(r.useContext)(K),n=a.tableState,c=a.dispatchTable,i=Object(r.useState)(""),o=Object(d.a)(i,2),u=o[0],j=o[1],h=Object(r.useState)(null),p=Object(d.a)(h,2),m=p[0],O=p[1],g=Object(Q.g)();function x(){return(x=Object(l.a)(s.a.mark((function t(){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P("/sala/show/"+(null===(a=e.match)||void 0===a?void 0:a.params.uidsala));case 3:r=t.sent,j(r.sala.nombre),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function f(){t.emit("actualizar-table",{nombre:m.nombre,subtitle:m.subtitle,descripcion:m.descripcion,uid:m.uid})}return Object(r.useEffect)((function(){var a;!function(){x.apply(this,arguments)}(),null===t||void 0===t||t.emit("ingresar-sala",{uid:null===(a=e.match)||void 0===a?void 0:a.params.uidsala})}),[]),Object(r.useEffect)((function(){null===t||void 0===t||t.on("table-actualizado",(function(a){var r;null===t||void 0===t||t.emit("ingresar-sala",{uid:null===(r=e.match)||void 0===r?void 0:r.params.uidsala})}))}),[t]),Object(w.jsxs)("div",{className:"containers",children:[Object(w.jsx)("a",{href:"/home",style:{display:"none"},id:"HomeInit"}),Object(w.jsxs)("div",{id:"diagramContainer",children:[n.array_table.map((function(e,a){return Object(w.jsx)(we.a,{header:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("p",{style:{fontSize:12},children:[" ",e.nombre," "]}),Object(w.jsxs)("p",{style:{fontSize:8,textAlign:"center"},children:[" ",e.subtitle," "]})]}),visible:!0,modal:!1,id:"diagram"+e.uid,style:{width:e.width,height:e.height,position:"fixed",top:e.top,left:e.left,border:m&&m.uid===e.uid&&"2px solid red"},className:"".concat("TP"===e.type?"modalPrimeReact darks":"TB"===e.type?"modalPrimeReact":"C"===e.type?"modalPrimeReact user":"modalPrimeReact circular"),contentClassName:"".concat("C"===e.type&&"modalContentPrimeReact user"),closable:!1,onClick:function(){e.index=a,O(e)},contentStyle:{padding:0},onResizeStart:function(e){},onResize:function(e){},onResizeEnd:function(a){var r=document.getElementById("diagram"+e.uid).getBoundingClientRect();t.emit("actualizar-table",{nombre:e.nombre,subtitle:e.subtitle,descripcion:e.descripcion,left:r.left,top:r.top,uid:e.uid,width:r.width,height:r.height})},onDragStart:function(e){},onDrag:function(e){},onDragEnd:function(a){var r=document.getElementById("diagram"+e.uid).getBoundingClientRect();t.emit("actualizar-table",{nombre:e.nombre,subtitle:e.subtitle,descripcion:e.descripcion,left:r.left,top:r.top,uid:e.uid,width:r.width,height:r.height})},children:Object(w.jsx)("div",{style:{padding:4,paddingBottom:1,backgroundColor:e.background,color:"white",marginTop:1,marginBottom:1,borderRadius:6,fontSize:9,height:"95%",display:"flex",alignItems:"center"},children:Object(w.jsx)("p",{children:e.descripcion})})},a)})),Object(w.jsxs)("div",{className:"inspectorDiagram",children:[m&&Object(w.jsx)("div",{style:{width:"100%",textAlign:"right"},children:Object(w.jsx)(Se.a,{style:{padding:3,color:"#dddfde",cursor:"pointer"},onClick:function(){O(null)}})}),m&&Object(w.jsxs)(Ce.a,{accordion:!0,defaultActiveKey:["1"],children:[Object(w.jsxs)(Ne,{header:Object(w.jsx)("span",{style:{color:"#dddfde",fontSize:12,fontWeight:"700",height:30},children:" TITLE "}),style:{backgroundColor:"#414548"},children:[Object(w.jsx)("div",{style:{width:"100%"},children:Object(w.jsx)(le.a,{style:{width:"100%",minWidth:"100%"},placeholder:"Escribir nombre...",value:m.nombre,onChange:function(e){O(Object(b.a)(Object(b.a)({},m),{},{nombre:e.target.value}))},onKeyPress:function(e){"Enter"===e.key&&f()}})}),Object(w.jsx)("div",{style:{width:"100%",textAlign:"center",marginTop:5},children:Object(w.jsx)(J.a,{type:"primary",style:{backgroundColor:"#00ba8b"},onClick:f,children:"Actualizar"})})]},"1"),Object(w.jsxs)(Ne,{header:Object(w.jsx)("span",{style:{color:"#dddfde",fontSize:12,fontWeight:"700",height:30},children:" SUB TITLE "}),style:{backgroundColor:"#414548"},children:[Object(w.jsx)("div",{style:{width:"100%"},children:Object(w.jsx)(le.a,{style:{width:"100%",minWidth:"100%"},placeholder:"Escribir sub title...",value:m.subtitle,onChange:function(e){O(Object(b.a)(Object(b.a)({},m),{},{subtitle:e.target.value}))},onKeyPress:function(e){"Enter"===e.key&&f()}})}),Object(w.jsx)("div",{style:{width:"100%",textAlign:"center",marginTop:5},children:Object(w.jsx)(J.a,{type:"primary",style:{backgroundColor:"#00ba8b"},onClick:f,children:"Actualizar"})})]},"2"),Object(w.jsxs)(Ne,{header:Object(w.jsx)("span",{style:{color:"#dddfde",fontSize:12,fontWeight:"700",height:30},children:" DESCRIPCION "}),style:{backgroundColor:"#414548"},children:[Object(w.jsx)("div",{style:{width:"100%"},children:Object(w.jsx)(le.a,{style:{width:"100%",minWidth:"100%"},placeholder:"Escribir descripcion...",value:m.descripcion,onChange:function(e){O(Object(b.a)(Object(b.a)({},m),{},{descripcion:e.target.value}))},onKeyPress:function(e){"Enter"===e.key&&f()}})}),Object(w.jsx)("div",{style:{width:"100%",textAlign:"center",marginTop:5},children:Object(w.jsx)(J.a,{type:"primary",style:{backgroundColor:"#00ba8b"},onClick:f,children:"Actualizar"})})]},"3")]})]})]}),Object(w.jsx)("div",{className:"pizarraDiagram",children:Object(w.jsxs)(Ce.a,{accordion:!0,defaultActiveKey:["1"],children:[Object(w.jsx)(Ne,{header:Object(w.jsx)("span",{style:{color:"#dddfde",fontSize:12,fontWeight:"700",height:30},children:" Component 1 "}),style:{backgroundColor:"#414548"},children:Object(w.jsxs)("div",{style:{width:"100%",display:"block",border:"1px solid rgb(246, 246, 246)",color:"#dddfde",cursor:"pointer"},draggable:!0,id:"NewTableDiagramB",onDragEnd:function(a){var r=a.pageX,n=a.pageY;t.emit("agregar-table",{uid:e.match.params.uidsala,left:r,top:n,background:"rgb(97, 84, 156)",type:"TB"})},children:[Object(w.jsx)("div",{style:{height:20,backgroundColor:"rgb(97, 84, 156)",borderRadius:3,marginBottom:1,paddingLeft:5},children:"TITLE"}),Object(w.jsx)("div",{style:{height:40,backgroundColor:"rgb(97, 84, 156)",borderRadius:3,marginBottom:1,paddingLeft:5},children:"SUB TITLE"}),Object(w.jsx)("div",{style:{height:20,backgroundColor:"rgb(97, 84, 156)",borderRadius:3,paddingLeft:5},children:"DESCRIPTION"})]})},"1"),Object(w.jsx)(Ne,{header:Object(w.jsx)("span",{style:{color:"#dddfde",fontSize:12,fontWeight:"700",height:30},children:" Component 2 "}),style:{backgroundColor:"#414548"},children:Object(w.jsxs)("div",{style:{width:"100%",display:"block",border:"1px solid rgb(246, 246, 246)",color:"#dddfde",cursor:"pointer",marginTop:20},draggable:!0,id:"NewTableDiagramP",onDragEnd:function(a){var r=a.pageX,n=a.pageY;t.emit("agregar-table",{uid:e.match.params.uidsala,left:r,top:n,background:"#99A3A4",type:"TP"})},children:[Object(w.jsx)("div",{style:{height:20,backgroundColor:"#99A3A4",borderRadius:3,marginBottom:1,paddingLeft:5},children:"TITLE"}),Object(w.jsx)("div",{style:{height:40,backgroundColor:"#99A3A4",borderRadius:3,marginBottom:1,paddingLeft:5},children:"SUB TITLE"}),Object(w.jsx)("div",{style:{height:20,backgroundColor:"#99A3A4",borderRadius:3,paddingLeft:5},children:"DESCRIPTION"})]})},"2"),Object(w.jsx)(Ne,{header:Object(w.jsx)("span",{style:{color:"#dddfde",fontSize:12,fontWeight:"700",height:30},children:" Component 3 "}),style:{backgroundColor:"#414548"},children:Object(w.jsxs)("div",{style:{width:"100%",display:"block",border:"1px solid rgb(246, 246, 246)",color:"#dddfde",cursor:"pointer",marginTop:20},draggable:!0,id:"NewTableDiagramC",onDragEnd:function(a){var r=a.pageX,n=a.pageY;t.emit("agregar-table",{uid:e.match.params.uidsala,left:r,top:n,background:"rgb(97, 84, 156)",type:"BD"})},children:[Object(w.jsx)("div",{style:{height:30,backgroundColor:"rgb(97, 84, 156)",borderRadius:"100px/50px",marginBottom:1,textAlign:"center",position:"relative",top:15,border:"1px solid #e8e8e8"},children:"TITLE"}),Object(w.jsx)("div",{style:{height:80,backgroundColor:"rgb(97, 84, 156)",borderRadius:3,paddingLeft:5,paddingTop:20},children:"DESCRIPTION"}),Object(w.jsx)("div",{style:{height:20,backgroundColor:"rgb(97, 84, 156)",borderRadius:3,paddingLeft:5,borderBottomLeftRadius:20,borderBottomRightRadius:20}})]})},"3"),Object(w.jsx)(Ne,{header:Object(w.jsx)("span",{style:{color:"#dddfde",fontSize:12,fontWeight:"700",height:30},children:" Component 4 "}),style:{backgroundColor:"#414548"},children:Object(w.jsxs)("div",{style:{width:"80%",margin:"auto",display:"block",border:"1px solid rgb(246, 246, 246)",color:"#dddfde",cursor:"pointer",marginTop:20},draggable:!0,id:"NewTableDiagramC",onDragEnd:function(a){var r=a.pageX,n=a.pageY;t.emit("agregar-table",{uid:e.match.params.uidsala,left:r,top:n,background:"rgb(97, 84, 156)",type:"C"})},children:[Object(w.jsx)("div",{style:{height:60,width:60,margin:"auto",backgroundColor:"rgb(97, 84, 156)",borderRadius:100,marginBottom:1,position:"relative",top:15,display:"flex",alignItems:"center",justifyContent:"center"},children:"TITLE"}),Object(w.jsx)("div",{style:{height:60,backgroundColor:"rgb(97, 84, 156)",borderRadius:10,paddingLeft:5}})]})},"4")]})}),Object(w.jsxs)("div",{className:"footerContainer",children:[u,Object(w.jsx)(J.a,{type:"primary",style:{backgroundColor:"#00ba8b"},onClick:function(){t.emit("finalizar-sala",{uid:e.match.params.uidsala}),c({type:k}),g.push("/home")},children:"Cerrar Sala"})]})]})})),Te=Object(re.a)(),Ee=function(){var e=Object(r.useState)("1"),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(w.jsxs)(Q.d,{children:[Object(w.jsx)(Q.b,{exact:!0,path:"/pizarra_virtual/:uidsala",render:function(e){return Object(w.jsx)(Ie,Object(b.a)({},e))}}),Object(w.jsx)(Q.b,{history:Te,children:Object(w.jsx)(ke,{keyMenu:a,setKeyMenu:function(e){return n(e)},children:Object(w.jsxs)(Q.d,{children:[Object(w.jsx)(Q.b,{exact:!0,path:"/home",render:function(e){return Object(w.jsx)(pe,Object(b.a)({keyMenu:a,setKeyMenu:function(e){return n(e)}},e))}}),Object(w.jsx)(Q.a,{exact:!0,to:"/home"})]})})})]})},Re=a(119),Ae=["isAuthenticated","component"],Le=function(e){var t=e.isAuthenticated,a=e.component,r=Object(Re.a)(e,Ae);return Object(w.jsx)(Q.b,Object(b.a)(Object(b.a)({},r),{},{component:function(e){return t?Object(w.jsx)(a,Object(b.a)({},e)):Object(w.jsx)(Q.a,{to:"/auth"})}}))},ze=["isAuthenticated","component"],Pe=function(e){var t=e.isAuthenticated,a=e.component,r=Object(Re.a)(e,ze);return Object(w.jsx)(Q.b,Object(b.a)(Object(b.a)({},r),{},{component:function(e){return t?Object(w.jsx)(Q.a,{to:"/home"}):Object(w.jsx)(a,Object(b.a)({},e))}}))},De=function(){var e=Object(r.useContext)(D),t=e.auth,a=e.verificaToken;return Object(r.useEffect)((function(){a()}),[a]),t.checking?Object(w.jsx)(V,{}):t.onOffLine?Object(w.jsx)("div",{style:{width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(w.jsxs)("div",{style:{width:"40%",display:"block"},children:[Object(w.jsx)("div",{children:"Sin Conexi\xf3n a internet"}),Object(w.jsxs)("div",{style:{marginTop:10},children:[Object(w.jsx)(J.a,{type:"primary",style:{backgroundColor:"#00ba8b"},onClick:function(){return document.getElementById("reiniciarUri").click()},children:"Reintentar"}),Object(w.jsx)("a",{href:"/home",id:"reiniciarUri",style:{display:"none"}})]})]})}):Object(w.jsx)(X.a,{children:Object(w.jsx)("div",{children:Object(w.jsxs)(Q.d,{children:[Object(w.jsx)(Pe,{isAuthenticated:t.logged,path:"/auth",component:ae}),Object(w.jsx)(Le,{isAuthenticated:t.logged,path:"/",component:Ee}),Object(w.jsx)(Q.a,{exact:!0,to:"/home"})]})})})};var _e=function(){return Object(w.jsx)(Y,{children:Object(w.jsx)(A,{children:Object(w.jsx)(I,{children:Object(w.jsx)(B,{children:Object(w.jsx)(H,{children:Object(w.jsx)(De,{})})})})})})},Be=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,303)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),r(e),n(e),c(e),i(e)}))};i.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(_e,{})}),document.getElementById("root")),Be()}},[[285,1,2]]]);
//# sourceMappingURL=main.2b01bcb3.chunk.js.map